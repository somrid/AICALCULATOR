<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>р╣Вр╕Ыр╕гр╣Бр╕Бр╕гр╕бр╕Др╕│р╕Щр╕зр╕Ур╕Хр╕▒р╕зр╣Ар╕ер╕В</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <button class="theme-btn" onclick="toggleTheme()">ЁЯМЩ</button>
    <div style="height:20px;"></div>
    <div id="alertBox" class="alert-bar"></div>
    
    <div class="lotto-header">
        <h2 style="margin-bottom:10px; font-weight:800; color:var(--txt);">ЁЯФв AI CALCULATOR <span style="font-size:12px; background:var(--p); color:white; padding:2px 8px; border-radius:10px;">ULTIMATE FINAL FIXED v16</span></h2>
        
        <div class="lotto-selector-group">
            <select id="lottoSelector" onchange="changeLottoType()">
                <option value="thai">ЁЯЗ╣ЁЯЗн р╕лр╕зр╕вр╕гр╕▒р╕Рр╕Ър╕▓р╕е</option>
                <option value="lao">ЁЯЗ▒ЁЯЗж р╕лр╕зр╕вр╕ер╕▓р╕з</option>
                <option value="hanoi">ЁЯЗ╗ЁЯЗ│ р╕лр╕зр╕вр╕ор╕▓р╕Щр╕нр╕в</option>
                <option value="yeekee">ЁЯО░ р╕лр╕зр╕вр╕вр╕╡р╣Ир╕Бр╕╡</option>
                <option value="stock">ЁЯУИ р╕лр╕зр╕вр╕лр╕╕р╣Йр╕Щ/р╕нр╕╖р╣Ир╕Щр╣Ж</option>
            </select>
            <span id="dbCount" class="db-counter">0 р╕Зр╕зр╕Ф</span>
            <button onclick="renameLotto()" class="btn" style="padding:2px 8px; font-size:12px; border:none; background:transparent;">тЬПя╕П</button>
        </div>
    </div>

    <div class="collapsible-container">
        <div class="collapsible-header" onclick="toggleSection('inputContent', 'inputIcon')">
            <span>ЁЯУЭ р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕ер╕░р╕кр╕Цр╕┤р╕Хр╕┤</span><span id="inputIcon">тЦ╝</span>
        </div>
        <div id="inputContent" class="collapsible-content">
            <div class="input-section">
                <div class="input-box-main">
                    <div class="label-head"><span>ЁЯУЪ р╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е</span><div><button onclick="toggleEditData()" id="btnEdit" class="btn">тЬПя╕П р╣Бр╕Бр╣Йр╣Др╕В</button> <button onclick="clearAll()" class="btn" style="color:#ef4444;">р╕ер╣Йр╕▓р╕З</button></div></div>
                    <textarea id="inputData" class="history-area" placeholder="р╕зр╕▓р╕Зр╕кр╕Цр╕┤р╕Хр╕┤р╕Ьр╕ер╕гр╕▓р╕Зр╕зр╕▒р╕ер╕Чр╕╡р╣Ир╕Щр╕╡р╣И..." readonly></textarea>
                </div>
                <div class="input-box-add">
                    <div class="label-head"><span>тЮХ р╣Ар╕Хр╕┤р╕бр╕Зр╕зр╕Фр╣Гр╕лр╕бр╣И</span><button class="btn" id="btnOrder" onclick="toggleOrder()">тмЗ р╕Ыр╕Бр╕Хр╕┤</button></div>
                    <textarea id="newData" class="add-area"></textarea>
                    <button class="btn-add" onclick="appendAndRun()">р╣Ар╕Юр╕┤р╣Ир╕б + р╕Др╕│р╕Щр╕зр╕У</button>
                </div>
            </div>
        </div>
    </div>

    <div class="collapsible-container">
        <div class="collapsible-header" onclick="toggleSection('dashAnalytics', 'dashIcon1')">
            <span>ЁЯУК р╣Бр╕Фр╕Кр╕Ър╕нр╕гр╣Мр╕Фр╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Ьр╕е (Flow & Structure)</span><span id="dashIcon1">тЦ╝</span>
        </div>
        <div id="dashAnalytics" class="collapsible-content">
            <div class="dashboard-grid">
                <div class="flow-section" id="flowPanel" style="display:none;">
                    <div class="label-head" style="justify-content:center;">ЁЯМК р╣Ар╕ер╕Вр╣Др╕лр╕е (Flow 10 р╕лр╕ер╕▒р╕Б)</div>
                    <div id="flowGridWrapper" class="flow-grid-wrapper"></div>
                </div>
                <div class="structure-section" id="structurePanel" style="display:none;">
                    <div class="label-head" style="justify-content:center;">ЁЯУК р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕З (Structure)</div>
                    <div id="structGridWrapper" class="struct-grid-wrapper"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="collapsible-container" style="margin-top: 20px;">
        <div class="collapsible-header" onclick="toggleSection('dashSmartFlow', 'dashIcon2')">
            <span>ЁЯУЭ р╕Ир╕▒р╕Фр╕Кр╕╕р╕Фр╣Др╕лр╕е (Smart Flow Top 5)</span><span id="dashIcon2">тЦ╝</span>
        </div>
        <div id="dashSmartFlow" class="collapsible-content">
            <div class="smart-flow-box" style="margin-top:0; border:none; box-shadow:none;">
                <div class="sf-header">
                    <span style="font-size:16px; font-weight:800; color:#b45309;">ЁЯУЭ р╕Ир╕▒р╕Фр╕Кр╕╕р╕Фр╣Др╕лр╕е (Smart Flow Top 5)</span>
                    <div class="sf-controls">
                        <select id="sfTarget" class="btn" style="padding:4px;">
                            <option value="0">1. р╕лр╕ер╕▒р╕Бр╕гр╣Йр╕нр╕в</option>
                            <option value="1">2. р╕лр╕ер╕▒р╕Бр╕кр╕┤р╕Ър╕Ър╕Щ</option>
                            <option value="2">3. р╕лр╕ер╕▒р╕Бр╕лр╕Щр╣Ир╕зр╕вр╕Ър╕Щ</option>
                            <option value="3">4. р╕Юр╕┤р╕Бр╕▒р╕Фр╕Ър╕Щ</option>
                            <option value="4">5. р╕лр╕ер╕▒р╕Бр╕кр╕┤р╕Ър╕ер╣Ир╕▓р╕З</option>
                            <option value="5">6. р╕лр╕ер╕▒р╕Бр╕лр╕Щр╣Ир╕зр╕вр╕ер╣Ир╕▓р╕З</option>
                            <option value="6">7. р╕Юр╕┤р╕Бр╕▒р╕Фр╕ер╣Ир╕▓р╕З</option>
                            <option value="7">8. р╕Ър╕Щ+р╕ер╣Ир╕▓р╕З (р╕гр╕зр╕б)</option>
                            <option value="8">9. р╣Бр╕Хр╣Йр╕бр╕Ър╕Щ</option>
                            <option value="9">10. р╣Бр╕Хр╣Йр╕бр╕ер╣Ир╕▓р╕З</option>
                            <option value="10">11. р╕зр╕┤р╕Щр╕Ър╕Щ (р╕Др╕гр╕Ъ 2 р╕Хр╕▒р╕з)</option>
                            <option value="11">12. р╕зр╕┤р╕Щр╕ер╣Ир╕▓р╕З (р╕Др╕гр╕Ъ 2 р╕Хр╕▒р╕з)</option>
                        </select>
                        <span style="font-size:12px; font-weight:bold;">р╣Ар╕нр╕▓:</span>
                        <input type="number" id="sfLen" value="4" min="1" max="9" style="width:40px;" title="р╕Ир╕│р╕Щр╕зр╕Щр╕Хр╕▒р╕зр╣Ар╕ер╕В">
                        <span style="font-size:12px; font-weight:bold;">р╕вр╣Йр╕нр╕Щ:</span>
                        <input type="number" id="sfLookback" value="10" style="width:40px;" title="р╕Ир╕│р╕Щр╕зр╕Щр╕Зр╕зр╕Ф">
                        <button class="sf-btn" onclick="genSmartFlow()">ЁЯЪА р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣М</button>
                        <button class="btn" onclick="copySmartFlow()">Copy All</button>
                    </div>
                </div>
                <div id="sfOutput" class="sf-grid-container"></div>
            </div>
        </div>
    </div>

    <div class="control-panel">
        <div class="display-mode-group">
            <button class="btn-mode active" id="btnModeAuto" onclick="setMode('auto')">ЁЯдЦ Auto (Top 5)</button>
            <button class="btn-mode" id="btnModeAll" onclick="setMode('all')">ЁЯУЬ Manual (р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф)</button>
            <div id="manualControl" class="manual-control">
                <span>р╕Ир╕│р╕Щр╕зр╕Щр╕кр╕╣р╕Хр╕г: <input type="number" id="manualLimitInput" class="manual-limit-input" value="100" min="10" onchange="runProgram()"></span>
            </div>
        </div>

        <div class="hunt-toggle-group">
            <button class="btn-hunt active" id="btnHuntOff" onclick="setHunt(false)">ЁЯОп р╕Ыр╕Бр╕Хр╕┤</button>
            <button class="btn-hunt" id="btnHuntOn" onclick="setHunt(true)">ЁЯФл р╕ер╣Ир╕▓</button>
            <span id="huntInputWrap" style="display:none; align-items:center; margin-left:10px;">
                р╕Хр╕▓р╕б <input type="number" id="huntMax" value="3" style="width:40px;"> р╕Зр╕зр╕Ф
            </span>
        </div>

        <div style="text-align:center; margin-bottom:15px;">
            <button class="btn-sort active" id="sortScore" onclick="setSort('score')">ЁЯПЖ р╣Ар╕гр╕╡р╕вр╕Зр╕Хр╕▓р╕бр╕Др╕зр╕▓р╕бр╣Бр╕бр╣Ир╕Щ</button>
            <button class="btn-sort" id="sortFixed" onclick="setSort('fixed')">ЁЯФд р╣Ар╕гр╕╡р╕вр╕Зр╕Хр╕▓р╕бр╕кр╕╣р╕Хр╕г (р╕Др╕Зр╕Чр╕╡р╣И)</button>
        </div>

        <div class="settings-bar" style="justify-content: center; gap: 15px; flex-wrap: wrap; background: #f8fafc; border: 1px solid #e2e8f0; padding: 12px; border-radius: 12px; margin-bottom: 20px;">
            <div style="display:flex; align-items:center; gap:5px;">
                <span style="font-weight:700; color:#334155;">ЁЯУЕ р╕ер╣Ир╕▓р╕кр╕╕р╕Ф:</span>
                <input type="number" id="rangeCount" value="10" oninput="updateRangeFromCount()" style="width:50px; text-align:center; padding:4px; border:2px solid #cbd5e1; border-radius:6px; font-weight:bold; color:#1e3a8a;">
                <span style="font-size:13px; font-weight:700; color:#64748b;">р╕Зр╕зр╕Ф</span>
            </div>
            <div style="display:flex; align-items:center; gap:5px; border-left:2px solid #e2e8f0; padding-left:10px;">
                <span style="font-weight:700; color:#334155;">ЁЯФО р╣Ар╕гр╕┤р╣Ир╕б:</span>
                <input type="number" id="rangeStart" oninput="updateCountFromRange()" style="width:50px; text-align:center; padding:4px; border:2px solid #cbd5e1; border-radius:6px; font-weight:bold; color:#475569;">
                <span style="font-weight:700; color:#334155;">р╕Цр╕╢р╕З</span>
                <input type="number" id="rangeEnd" oninput="updateCountFromRange()" style="width:50px; text-align:center; padding:4px; border:2px solid #cbd5e1; border-radius:6px; font-weight:bold; color:#475569;">
            </div>
            <div style="display:flex; align-items:center; gap:5px; border-left:2px solid #e2e8f0; padding-left:10px;">
                <span style="color:#2563eb; font-weight:800;">тПй р╕Чр╕Фр╕кр╕нр╕Ъ:</span>
                <input type="number" id="forwardTest" value="0" min="0" max="20" onchange="runProgram()" title="р╕Хр╕▒р╕Фр╕Ьр╕ер╕ер╣Ир╕▓р╕кр╕╕р╕Фр╕нр╕нр╕Б X р╕Зр╕зр╕Фр╣Ар╕Юр╕╖р╣Ир╕нр╕Чр╕Фр╕кр╕нр╕Ър╕кр╕╣р╕Хр╕г" style="width:50px; text-align:center; padding:4px; border:2px solid #3b82f6; border-radius:6px; font-weight:bold; color:#1e3a8a;">
                <span style="font-size:13px; font-weight:700; color:#2563eb;">р╕Зр╕зр╕Ф</span>
            </div>
            <div style="display:flex; align-items:center; gap:5px; border-left:2px solid #e2e8f0; padding-left:10px;">
                <span style="color:#dc2626; font-weight:800;">тЫФ р╕Ьр╕┤р╕Ф тЙд</span>
                <input type="number" id="maxLoss" placeholder="-" onchange="runProgram()" title="р╕кр╕╣р╕Хр╕гр╕Хр╣Йр╕нр╕Зр╕Ьр╕┤р╕Фр╕гр╕зр╕бр╣Др╕бр╣Ир╣Ар╕Бр╕┤р╕Щр╕Щр╕╡р╣Й" style="width:50px; text-align:center; padding:4px; border:2px solid #ef4444; border-radius:6px; font-weight:bold; color:#b91c1c;">
            </div>
            <div style="display:flex; align-items:center; gap:5px;">
                <span style="color:#dc2626; font-weight:800;">ЁЯУЙ р╕Лр╣Йр╕│ тЙд</span>
                <input type="number" id="maxConsLoss" placeholder="-" onchange="runProgram()" title="р╕кр╕╣р╕Хр╕гр╕Хр╣Йр╕нр╕Зр╣Др╕бр╣Ир╕Ьр╕┤р╕Фр╕Хр╕┤р╕Фр╕Бр╕▒р╕Щр╣Ар╕Бр╕┤р╕Щр╕Щр╕╡р╣Й" style="width:50px; text-align:center; padding:4px; border:2px solid #ef4444; border-radius:6px; font-weight:bold; color:#b91c1c;">
            </div>
            <div style="display:flex; align-items:center; gap:5px; border-left:2px solid #e2e8f0; padding-left:10px;">
                <span style="color:#9333ea; font-weight:800;">тЬВя╕П р╕Хр╕▒р╕Фр╣Ар╕ер╕В:</span>
                <input type="text" id="killDigits" placeholder="р╣Ар╕Кр╣Ир╕Щ 05" onchange="runProgram()" style="width:70px; text-align:center; padding:4px; border:2px solid #a855f7; border-radius:6px; font-weight:bold; color:#6b21a8;">
            </div>
        </div>

        <div class="pattern-bar" style="justify-content: space-between;">
            <div style="display:flex; gap:5px; align-items:center;">
                <span style="font-weight:bold; font-size:13px;">р╕гр╕╣р╕Ыр╣Бр╕Ър╕Ъ:</span>
                <button class="btn-step active" onclick="setStep('normal', this)">р╣Ар╕гр╕╡р╕вр╕З</button>
                <button class="btn-step" onclick="setStep('odd', this)">р╕Др╕╡р╣И</button>
                <button class="btn-step" onclick="setStep('even', this)">р╕Др╕╣р╣И</button>
                <button class="btn-step" onclick="setStep('step3', this)">р╕Вр╣Йр╕▓р╕б3</button>
            </div>
            <div style="display:flex; gap:3px; align-items:center;">
                <span style="font-weight:bold; font-size:13px;">р╕Ир╕│р╕Щр╕зр╕Щ:</span>
                <button class="btn-len" onclick="setLen(1, this)">1</button>
                <button class="btn-len" onclick="setLen(2, this)">2</button>
                <button class="btn-len" onclick="setLen(3, this)">3</button>
                <button class="btn-len" onclick="setLen(4, this)">4</button>
                <button class="btn-len active" onclick="setLen(5, this)">5</button>
                <button class="btn-len" onclick="setLen(6, this)">6</button>
                <button class="btn-len" onclick="setLen(7, this)">7</button>
                <button class="btn-len" onclick="setLen(8, this)">8</button>
                <button class="btn-len" onclick="setLen(9, this)">9</button>
            </div>
        </div>

        <div class="grid-targets">
            <button class="btn-target active" onclick="setTarget('hundred')">ЁЯТп р╕лр╕ер╕▒р╕Бр╕гр╣Йр╕нр╕в</button>
            <button class="btn-target" onclick="setTarget('tens_up')">тмЖя╕П р╕кр╕┤р╕Ър╕Ър╕Щ</button>
            <button class="btn-target" onclick="setTarget('units_up')">тЖЧя╕П р╕лр╕Щр╣Ир╕зр╕вр╕Ър╕Щ</button>
            <button class="btn-target" onclick="setTarget('tens_down')">тмЗя╕П р╕кр╕┤р╕Ър╕ер╣Ир╕▓р╕З</button>
            <button class="btn-target" onclick="setTarget('units_down')">тЖШя╕П р╕лр╕Щр╣Ир╕зр╕вр╕ер╣Ир╕▓р╕З</button>
            <button class="btn-target" style="color:var(--p); border-color:var(--p);" onclick="setTarget('tf_up')">ЁЯПГ р╕Ър╕Щ (тЙе1)</button>
            <button class="btn-target" style="color:var(--p); border-color:var(--p);" onclick="setTarget('tf_down')">ЁЯПГ р╕ер╣Ир╕▓р╕З (тЙе1)</button>
            <button class="btn-target" style="color:#6610f2; border-color:#6610f2;" onclick="setTarget('pair_up')">ЁЯНТ р╕зр╕┤р╕Щр╕Ър╕Щ (2)</button>
            <button class="btn-target" style="color:#6610f2; border-color:#6610f2;" onclick="setTarget('pair_down')">ЁЯНТ р╕зр╕┤р╕Щр╕ер╣Ир╕▓р╕З (2)</button>
            <button class="btn-target" style="color:#dc3545; border-color:#dc3545;" onclick="setTarget('any_no_hundred')">ЁЯО▓ р╕Ър╕Щ/р╕ер╣Ир╕▓р╕З*</button>
        </div>

        <button class="btn-add" style="background:var(--p); width:200px; display:block; margin:0 auto;" onclick="runProgram()">ЁЯЪА р╕Др╕│р╕Щр╕зр╕Ур╣Гр╕лр╕бр╣И</button>
    </div>

    <div id="loading" style="text-align:center; padding:20px; display:none; color:#888;">тП│ р╕Бр╕│р╕ер╕▒р╕Зр╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕е...</div>
    <div class="table-wrapper" id="tableWrapper" style="display:none;"><div id="resultContainer"></div></div>
    
    <div id="tableFooterControls" class="table-footer-controls">
        <button class="page-btn" onclick="changePage(-1)">тЭо р╕Бр╣Ир╕нр╕Щр╕лр╕Щр╣Йр╕▓</button>
        <span id="pageInfo" class="page-info">1-10</span>
        <button class="page-btn" onclick="changePage(1)">р╕Цр╕▒р╕Фр╣Др╕Ы тЭп</button>
    </div>

    <div id="consensusSection" class="consensus-box" style="display:none; margin-top:20px; padding:15px; background:#fff7ed; border:2px solid #fdba74; border-radius:15px; text-align:center;">
        <div style="font-size:20px; font-weight:800; color:#9a3412; margin-bottom:10px;">ЁЯПЖ р╕кр╕гр╕╕р╕Ыр╣Ар╕ер╕Вр╕Кр╕Щ</div>
        <div id="consensusContent" style="display:flex; justify-content:center; gap:10px; flex-wrap:wrap;"></div>
    </div>
    
    <div id="copyArea" class="copy-container" style="display:none;">
        <button class="btn-line" onclick="copyToLine()">ЁЯУЛ р╕Др╕▒р╕Фр╕ер╕нр╕Бр╕Ьр╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</button>
    </div>

    <div class="vin-flow-section" id="vinFlowSection" style="display:none;">
        <div class="vin-header">
            <div class="vin-title">ЁЯТ░ р╕Ир╕▒р╕Ър╕зр╕┤р╕Щр╣Ар╕ер╕Вр╣Др╕лр╕е (Auto Flow Vin)</div>
            <div>р╕Хр╕▒р╕Фр╕Бр╕╡р╣Ир╕Хр╕▒р╕з: <input type="number" id="vinFlowLimit" value="5" min="2" max="9" onchange="calcVinFlow()" style="width:40px;">┬а
┬а ┬а ┬а ┬а ┬а ┬а р╕Хр╕▒р╕Фр╣Бр╕Хр╣Йр╕б: <input type="text" id="vinFlowSumKill" placeholder="05" onkeyup="calcVinFlow()" style="width:50px;"></div>
        </div>
        <div class="vin-grid">
            <div class="vin-box">
                <div class="vin-head bg-vin-up"><span>ЁЯНТ р╕зр╕┤р╕Щр╕Ър╕Щ</span><button class="btn-tiny" onclick="copyFlowVin('up')">Copy</button></div>
                <div id="vinFlowUpContent" class="vin-body">...</div>
            </div>
            <div class="vin-box">
                <div class="vin-head bg-vin-down"><span>ЁЯНТ р╕зр╕┤р╕Щр╕ер╣Ир╕▓р╕З</span><button class="btn-tiny" onclick="copyFlowVin('down')">Copy</button></div>
                <div id="vinFlowDownContent" class="vin-body">...</div>
            </div>
        </div>
    </div>

    <div style="height:50px;"></div>
    <div id="toast" class="toast">тЬЕ р╕Др╕▒р╕Фр╕ер╕нр╕Бр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕в!</div>
    <input type="hidden" id="manualLimitInput" value="100">
</div>

<script src="script.js"></script>

</body>
</html>