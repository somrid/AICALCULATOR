/* (CSS คงเดิม) */
:root { --bg: linear-gradient(135deg, #f8fafc 0%, #eff6ff 100%); --c-bg: #ffffff; --txt: #1e293b; --txt-l: #475569; --p: #2563eb; --border: #cbd5e1; }
body.dark-mode { --bg: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); --c-bg: #1e293b; --txt: #f1f5f9; --txt-l: #cbd5e1; --border: #475569; }
* { font-family: 'Sarabun', sans-serif !important; box-sizing: border-box; }
body { background: var(--bg); padding: 20px; color: var(--txt); transition: 0.3s; margin: 0; }
.container { max-width: 1400px; margin: 0 auto; background: var(--c-bg); padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 1px solid var(--border); position: relative; }
.theme-btn { position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; border-radius: 50%; border: 1px solid var(--border); background: var(--c-bg); color: var(--txt); cursor: pointer; display: flex; align-items: center; justify-content: center; }

.lotto-header { text-align: center; margin-bottom: 20px; }
.lotto-selector-group { display: inline-flex; align-items: center; gap: 10px; background: #f1f5f9; padding: 5px 15px; border-radius: 50px; border: 1px solid var(--border); margin-top: 10px; }
body.dark-mode .lotto-selector-group { background: #334155; }
select#lottoSelector { border: none; background: transparent; font-size: 16px; font-weight: 700; color: var(--p); cursor: pointer; outline: none; }
.input-section { display: flex; gap: 20px; flex-wrap: wrap; margin-bottom: 20px; }
.input-box-main { flex: 1.5; min-width: 300px; }
.input-box-add { flex: 1; min-width: 250px; background: #f0f9ff; padding: 20px; border-radius: 15px; border: 1px solid #bae6fd; display: flex; flex-direction: column; }
body.dark-mode .input-box-add { background: #172554; border-color: #1e40af; }
textarea { width: 100%; padding: 10px; border: 2px solid var(--border); border-radius: 10px; resize: vertical; background: var(--c-bg); color: var(--txt); font-size: 16px; font-weight: 500; }
.history-area { height: 150px; } .add-area { height: 100px; }
.label-head { font-weight: 800; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; color: var(--p); font-size: 18px; }
.db-counter { background: #3b82f6; color: white; font-size: 12px; padding: 2px 8px; border-radius: 10px; margin-left: 5px; font-weight: 600; }
.btn { padding: 5px 15px; border-radius: 20px; border: 1px solid var(--border); background: var(--c-bg); color: var(--txt-l); cursor: pointer; font-weight: 700; transition: 0.2s; font-size: 14px; }
.btn:hover { transform: translateY(-1px); }
.btn.active { background: var(--p); color: white; border-color: var(--p); }
.btn-add { width: 100%; margin-top: 10px; padding: 10px; background: #10b981; color: white; border: none; border-radius: 8px; font-weight: 800; cursor: pointer; font-size: 16px; }

.collapsible-container { border-radius: 15px; border: 1px solid var(--border); overflow: hidden; margin-bottom: 20px; background: var(--c-bg); box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
.collapsible-header { padding: 15px; background: #f1f5f9; cursor: pointer; font-weight: 700; display: flex; justify-content: space-between; align-items: center; color: var(--txt); border-bottom: 1px solid var(--border); }
body.dark-mode .collapsible-header { background: #334155; }
.collapsible-content { padding: 20px; display: block; }
.dashboard-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
@media (max-width: 900px) { .dashboard-grid { grid-template-columns: 1fr; } }

.flow-section, .structure-section { background: var(--c-bg); padding: 15px; border-radius: 15px; border: 1px solid var(--border); }
.flow-grid-wrapper, .struct-grid-wrapper { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; align-content: start; }
.flow-card, .struct-card { border: 1px solid var(--border); border-radius: 10px; overflow: hidden; background: var(--c-bg); }
.flow-header { padding: 6px 10px; font-weight: 700; color: white; font-size: 14px; display: flex; justify-content: space-between; align-items: center; }
.flow-body, .struct-body { padding: 10px; text-align: center; }
.flow-num-row { font-size: 18px; font-weight: 700; letter-spacing: 2px; margin-bottom: 5px; }
.flow-trend-row { height: 4px; display: flex; gap: 1px; justify-content: center; align-items: flex-end; }
.trend-bar { width: 6px; background: var(--border); border-radius: 1px; } .trend-bar.hot { background: #ef4444; }
.bg-hundred { background: #ef4444; } .bg-tens-up { background: #f97316; } .bg-units-up { background: #eab308; color:black!important; } 
.bg-up-all { background: #84cc16; } .bg-tens-down { background: #06b6d4; } .bg-units-down { background: #3b82f6; } .bg-down-all { background: #6366f1; } .bg-all { background: #a855f7; }
.bg-sum-top { background: #be185d; } .bg-sum-bot { background: #0369a1; }
.struct-bar-bg { width: 100%; height: 8px; background: #f1f5f9; border-radius: 4px; overflow: hidden; display: flex; margin-bottom: 5px; }
body.dark-mode .struct-bar-bg { background: #334155; }
.struct-bar-val { height: 100%; display: flex; align-items: center; justify-content: center; font-size: 9px; color: white; font-weight: bold; }
.sb-odd { background: #3b82f6; } .sb-even { background: #f43f5e; } .sb-high { background: #10b981; } .sb-low { background: #f59e0b; }

.smart-flow-box { border: 2px dashed #f59e0b; border-radius: 15px; padding: 20px; background: #fffbeb; margin-top: 20px; }
body.dark-mode .smart-flow-box { background: #451a03; border-color: #d97706; }
.sf-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap:10px; }
.sf-controls { display: flex; gap: 5px; align-items: center; flex-wrap: wrap; }
.sf-btn { background: #d97706; color: white; border: none; padding: 5px 15px; border-radius: 20px; font-weight: bold; cursor: pointer; }
.sf-grid-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 15px; margin-top: 15px; }
.sf-card { background: var(--c-bg); border: 1px solid var(--border); border-radius: 10px; padding: 10px; display: flex; flex-direction: column; box-shadow: 0 2px 5px rgba(0,0,0,0.05); height: 400px; }
.sf-card-header { font-weight: 800; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; color: #b45309; border-bottom: 1px dashed var(--border); padding-bottom: 5px; }
.sf-card-body { flex: 1; overflow-y: auto; font-family: monospace; font-size: 13px; line-height: 1.5; color: var(--txt); background: rgba(0,0,0,0.02); padding: 5px; border-radius: 5px; white-space: pre-wrap; }
.sf-card-footer { margin-top: 10px; display: flex; justify-content: space-between; align-items: center; }
.btn-copy-sf { background: var(--c-bg); border: 1px solid var(--p); color: var(--p); padding: 2px 8px; border-radius: 10px; cursor: pointer; font-size: 12px; font-weight: bold; }
.btn-copy-sf:hover { background: var(--p); color: white; }

/* CONTROLS */
.control-panel { border-top: 2px solid var(--border); padding-top: 20px; }
.display-mode-group { display: flex; gap: 10px; margin-bottom: 15px; justify-content: center; align-items: center; flex-wrap: wrap; }
.hunt-toggle-group { display: flex; gap: 10px; justify-content: center; background: #fff7ed; padding: 8px; border-radius: 50px; width: fit-content; margin: 10px auto; border: 1px solid #ffedd5; }
body.dark-mode .hunt-toggle-group { background: #451a03; border-color: #7c2d12; }
.btn-hunt { padding: 6px 20px; border-radius: 30px; font-weight: 700; color: #9a3412; border: 1px solid transparent; background: transparent; cursor: pointer; font-size: 14px; }
.btn-hunt.active { background: #f97316; color: white; }
body.dark-mode .btn-hunt { color: #fdba74; }
.btn-mode { padding: 8px 20px; border-radius: 50px; border: 1px solid var(--border); background: var(--c-bg); color: var(--txt); cursor: pointer; font-weight: 700; }
.btn-mode.active { background: var(--p); color: white; }
.manual-control { display: none; align-items: center; gap: 5px; font-size: 14px; }
.page-btn { padding: 5px 15px; background: var(--p); color: white; border: none; border-radius: 20px; cursor: pointer; font-weight: bold; }
.page-btn:disabled { opacity: 0.5; cursor: not-allowed; }
.page-info { font-weight: bold; color: var(--txt); font-size: 14px; }

.settings-bar, .pattern-bar { display: flex; gap: 10px; justify-content: center; background: #f1f5f9; padding: 10px; border-radius: 10px; margin-bottom: 15px; flex-wrap: wrap; }
.pattern-bar { background: var(--c-bg); border: 1px solid var(--border); }
body.dark-mode .settings-bar { background: #334155; }

.btn-step, .btn-len { padding: 5px 12px; border: 1px solid var(--border); border-radius: 15px; background: var(--c-bg); color: var(--txt-l); cursor: pointer; font-weight: 600; font-size: 13px; }
.btn-step.active, .btn-len.active { background: #7c3aed; color: white; border-color: #7c3aed; }
.btn-len.active { background: var(--p); border-color: var(--p); }

.btn-sort { padding: 6px 12px; border: 1px solid var(--border); border-radius: 15px; cursor: pointer; font-size: 14px; font-weight: 700; background: var(--c-bg); color: var(--txt-l); }
.btn-sort.active { background: #f59e0b; color: white; border-color: #f59e0b; }
.btn-sort.disabled { opacity: 0.4; cursor: not-allowed; pointer-events: none; }

.grid-targets { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 8px; margin-bottom: 20px; }
.btn-target { background: var(--c-bg); border: 2px solid var(--border); color: var(--txt-l); padding: 10px; border-radius: 10px; cursor: pointer; font-size: 13px; font-weight: 600; white-space: nowrap; }
.btn-target:hover { border-color: var(--p); color: var(--p); }
.btn-target.active { background: #eff6ff; border-color: var(--p); color: #1e40af; }
body.dark-mode .btn-target.active { background: #1e3a8a; color: #93c5fd; }
input[type=number], input[type=text] { padding: 5px; border-radius: 5px; border: 1px solid var(--border); text-align: center; background: var(--c-bg); color: var(--txt); width: 50px; font-size: 14px; font-weight: 600; }

/* TABLE */
.table-wrapper { margin-top: 20px; width: 100%; border-radius: 15px; border: 1px solid var(--border); overflow: auto; position: relative; }
table { width: 100%; border-collapse: separate; border-spacing: 0; font-size: 16px; white-space: nowrap; }
th { background: #334155; color: white; padding: 12px; position: sticky; top: 0; z-index: 50; font-weight: 600; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
th:first-child { left: 0; z-index: 60; background: #212529; border-right: 2px solid #475569; }
td { padding: 10px; text-align: center; border-bottom: 1px solid var(--border); border-right: 1px solid var(--border); font-size: 18px; color: var(--txt); }
td:first-child { position: sticky; left: 0; z-index: 40; background: #fef08a; font-weight: 800; color: black; border-right: 2px solid #cbd5e1; box-shadow: 2px 0 5px rgba(0,0,0,0.05); }
body.dark-mode td:first-child { background: #854d0e; color: #fef08a; border-color: #475569; }

.stat-t { color: #16a34a; font-weight: 900; font-size: 1.2em; }
.stat-f { color: #dc2626; font-weight: 900; font-size: 1.2em; }
.hunt-tag { font-size: 12px; padding: 2px 6px; border-radius: 6px; margin-left: 3px; color: white; font-weight: 600; }
.hunt-tag.win { background: #10b981; } .hunt-tag.wait { background: #f59e0b; }
.hm-dot { display: inline-block; width: 12px; height: 12px; border-radius: 50%; margin: 0 1px; }

/* MISC */
.vin-flow-section { margin-top: 20px; background: var(--c-bg); border: 1px solid var(--border); border-radius: 15px; padding: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
.vin-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px dashed var(--border); padding-bottom: 10px; margin-bottom: 15px; flex-wrap: wrap; gap:10px; }
.vin-title { font-size: 18px; font-weight: 700; color: var(--txt); }
.vin-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
@media (max-width: 700px) { .vin-grid { grid-template-columns: 1fr; } }
.vin-box { border: 1px solid var(--border); border-radius: 10px; overflow: hidden; }
.vin-head { padding: 10px; color: white; font-weight: 700; text-align: center; display: flex; justify-content: space-between; font-size: 15px; }
.vin-body { padding: 15px; text-align: center; font-size: 16px; font-weight: 600; line-height: 1.8; word-wrap: break-word; color: var(--txt); }
.bg-vin-up { background: linear-gradient(to right, #f59e0b, #d97706); }
.bg-vin-down { background: linear-gradient(to right, #3b82f6, #2563eb); }
.btn-tiny { background: rgba(255,255,255,0.25); border: none; color: white; cursor: pointer; padding: 2px 8px; border-radius: 4px; font-size: 12px; font-family: 'Sarabun'; }
.btn-star { background: none; border: none; cursor: pointer; font-size: 16px; color: #cbd5e1; margin-right: 4px; }
.btn-star.pinned { color: #f59e0b; transform: scale(1.2); }
.alert-bar { display: none; background-color: #fee2e2; border: 2px solid #ef4444; color: #b91c1c; padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center; font-weight: 700; }
.toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #1e293b; color: white; padding: 10px 25px; border-radius: 50px; font-weight: 600; display: none; z-index: 1000; box-shadow: 0 5px 15px rgba(0,0,0,0.3); font-size: 14px; }
.btn-copy-col { background: none; border: none; cursor: pointer; font-size: 14px; color: #cbd5e1; margin-left: 5px; transition: 0.2s; }
.btn-copy-col:hover { color: #fcc419; transform: scale(1.2); }
.table-footer-controls { display: none; justify-content: center; align-items: center; margin-top: 15px; gap: 15px; padding: 10px; background: #f1f5f9; border-radius: 10px; }
body.dark-mode .table-footer-controls { background: #334155; }
.manual-limit-input { width: 70px !important; margin-left: 5px; }

/* Highlight Logic for Smart Flow & Main Table */
.num-match { color: #db2777; font-weight: 900; }
.row-line { display: flex; justify-content: space-between; border-bottom: 1px dashed #e2e8f0; padding: 2px 0; }
body.dark-mode .row-line { border-color: #334155; }
body.dark-mode .num-match { color: #f472b6; }
.num-normal { opacity: 0.8; }